</head>
<body>
    <%- include('./partials/nav.ejs') %>
    <h1>Log In!</h1>
    <h1>Log In</h1>
    <br>
    <form id="login">
        Username
        <br>
        <input type="text" name="username" id="username" required></input> 
        <br>
        Password
        <br>
        <input type="password" name="pass" id="pass" required></input> 
        <br>
        <br>
        <button id="submit">Log In</button>
    </form>
    <script>
        const form = document.getElementById('login');
        form.addEventListener('submit', async (e) => 
        {
            e.preventDefault();
            const username = form.username.value;
            const pass = form.pass.value;
            try {
                const res = await fetch('/login', {
                    method: 'POST',
                    body: JSON.stringify({ username: username , password: pass }),
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await res.json();
                if(data.token)
                {
                    location.assign('/');
                }
            }
            catch(err) {
                console.log(err);
            }
        });
    </script>
    <%- include('./partials/footer.ejs') %>
</body>
</html> 